"use strict";(self["webpackChunksmart_mall"]=self["webpackChunksmart_mall"]||[]).push([[174],{6174:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"myorder"},[e("div",{staticClass:"header"},[e("van-nav-bar",{attrs:{title:"我的订单","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}})],1),e("div",{staticClass:"tab"},[e("van-tabs",{on:{click:t.onClick},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-tab",{attrs:{title:"全部",name:"all"}}),e("van-tab",{attrs:{title:"待支付",name:"payment"}}),e("van-tab",{attrs:{title:"待发货",name:"delivery"}}),e("van-tab",{attrs:{title:"待收货",name:"received"}}),e("van-tab",{attrs:{title:"待评价",name:"comment"}})],1)],1),0===t.total?e("div",{staticClass:"null"},[t._v(" .null{ width: 200px; margin: 150px auto 0px; padding-bottom: 300px; color: gray; // background-color: #fff; img{ width: 100%; height: 100%; } } 没有订单信息 ")]):e("div",{staticClass:"main"},[e("div",{staticClass:"order_list"},t._l(t.orderList,(function(t){return e("OrderListItem",{key:t.order_id,attrs:{item:t}})})),1),e("div",{staticClass:"footer"},[e("van-pagination",{attrs:{"page-count":t.last_page,"total-items":t.total,"items-per-page":t.per_page},on:{change:t.onClick},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])},i=[],o=function(){var t=this,e=t._self._c;return t.item.order_id?e("div",{staticClass:"order-list-item"},[e("div",{staticClass:"tit"},[e("div",{staticClass:"time"},[t._v(t._s(t.item.create_time))]),e("div",{staticClass:"status"},[e("span",[t._v(t._s(t.item.state_text))])])]),e("div",{staticClass:"list"},t._l(t.item.goods,(function(a,s){return e("div",{key:s,staticClass:"list-item"},[e("div",{staticClass:"goods-img"},[e("img",{attrs:{src:a.goods_image,alt:""}})]),e("div",{staticClass:"goods-content text-ellipsis-2"},[t._v(" "+t._s(a.goods_name)+" ")]),e("div",{staticClass:"goods-trade"},[e("p",[t._v("¥ "+t._s(a.total_pay_price))]),e("p",[t._v("x "+t._s(a.total_num))])])])})),0),e("div",{staticClass:"total"},[t._v(" 共 "+t._s(t.item.total_num)+" 件商品，总金额 ¥"+t._s(t.item.total_price)+" ")]),e("div",{staticClass:"actions"},[10===t.item.order_status?e("div",[10===t.item.pay_status?e("span",[t._v("立刻付款")]):10===t.item.delivery_status?e("span",{on:{click:function(e){return t.cancel(t.item.order_id)}}},[t._v("申请取消")]):20===t.item.delivery_status||30===t.item.delivery_status?e("span",[t._v("确认收货")]):t._e()]):t._e(),30===t.item.order_status?e("div",[e("span",[t._v("评价")])]):t._e()])]):t._e()},r=[],n=a(7535),l={props:{item:{type:Object,default:()=>({})}},methods:{cancel(t){this.goLogin(t)},goLogin(t){this.$dialog.confirm({title:"温馨提示",message:"确定需要删除这个订单吗",confirmButtonText:"确定",cancelButtonText:"取消"}).then((async()=>{const e=await(0,n.sl)(t);this.$toast.success(e.message)})).catch((()=>{}))}}},c=l,d=a(1001),u=(0,d.Z)(c,o,r,!1,null,"5734fcc0",null),m=u.exports,p={name:"MyOrder",components:{OrderListItem:m},data(){return{currentPage:1,active:this.$route.query.dataType||"all",orderList:[],last_page:0,per_page:0,total:0}},created(){this.onClick()},methods:{async onClick(){console.log(this.currentPage);const t=await(0,n.ue)(this.active,this.currentPage);this.orderList=t.data.list.data,this.last_page=t.data.list.last_page,this.per_page=t.data.list.per_page,this.total=t.data.list.total,console.log(t),console.log(t.data.list.data)}}},v=p,_=(0,d.Z)(v,s,i,!1,null,"e0d57eac",null),g=_.exports},7535:function(t,e,a){a.d(e,{Fw:function(){return o},Gd:function(){return i},pm:function(){return r},sl:function(){return l},ue:function(){return n}});var s=a(4471);const i=(t,e)=>s.Z.post("/checkout/order",{mode:t,delivery:10,couponId:0,isUsePoints:0,...e}),o=t=>s.Z.post("/order/detail",{orderId:t}),r=(t,e)=>(console.log(t,e),s.Z.post("/checkout/submit",{mode:t,delivery:10,couponId:0,isUsePoints:0,payType:10,...e})),n=(t,e)=>s.Z.post("/order/list",{dataType:t,page:e}),l=t=>s.Z.post("/order/cancel",{orderId:t})}}]);
//# sourceMappingURL=174.245de86d.js.map