"use strict";(self["webpackChunksmart_mall"]=self["webpackChunksmart_mall"]||[]).push([[837],{6837:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});e(7658);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pay"},[s("van-nav-bar",{attrs:{title:"订单结算台","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("div",{staticClass:"pay_detail"},[s("div",{staticClass:"adders",on:{click:function(s){return t.$router.push("/address")}}},[s("div",{staticClass:"car_icon"},[s("van-icon",{attrs:{size:"25px",name:"location-o"}})],1),t.address.name?s("div",{staticClass:"center"},[s("div",{staticClass:"name"},[s("span",[t._v(t._s(t.address.name))]),t._v(" "),s("span",[t._v(t._s(t.address.phone))])]),s("div",{staticClass:"adder"},[s("span",[t._v(t._s(t.address.region.province)+t._s(t.address.region.city)+t._s(t.address.region.region)+t._s(t.address.detail))])])]):t._e(),s("div",{staticClass:"more"},[s("van-icon",{attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"line"},t._l(10,(function(t){return s("img",{key:t.id,attrs:{src:e(6072),alt:""}})})),0),s("div",{staticClass:"product"},t._l(t.goods,(function(e){return s("div",{key:e.goods_id,staticClass:"cart_list"},[s("div",{staticClass:"column_2"},[s("img",{attrs:{src:e.goods_image,alt:""}})]),s("div",{staticClass:"column_3"},[s("div",{staticClass:"top text-ellipsis-2"},[t._v(" "+t._s(e.goods_name)+" ")]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"count"},[t._v("x"+t._s(e.total_num))]),s("div",{staticClass:"price"},[t._v("￥"+t._s(e.goods_price))])])])])})),0),s("div",{staticClass:"content"},[s("div",{staticClass:"total"},[t._v(" 共"+t._s(t.total_count)+"件商品,合计"),s("span",{staticClass:"red"},[t._v("￥"+t._s(t.total_price))])]),s("div",{staticClass:"discount"},[s("ul",[s("li",[s("div",[t._v("订单总金额")]),s("div",{staticClass:"red"},[t._v("￥"+t._s(t.total_price))])]),t._m(0),t._m(1)])]),s("div",{staticClass:"pay_type"},[s("div",{staticClass:"title"},[t._v("支付方式")]),s("div",{staticClass:"type"},[s("div",{staticClass:"left"},[s("van-icon",{attrs:{size:"22px",name:"balance-o"}}),t._v("余额支付(可用￥9999.00元) ")],1),s("div",{staticClass:"right red"},[s("van-icon",{attrs:{name:"passed"}})],1)])]),s("div",{staticClass:"message"},[s("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"50",placeholder:"选填:买家备注(50字内)","show-word-limit":""},model:{value:t.message,callback:function(s){t.message=s},expression:"message"}})],1)])]),s("div",{staticClass:"bottom_btu"},[s("van-submit-bar",{attrs:{price:100*t.total_price,"text-align":"left",label:"实付款","button-text":"支付订单"},on:{submit:t.onSubmit}})],1)],1)},i=[function(){var t=this,s=t._self._c;return s("li",[s("div",[t._v("优惠券")]),s("div",[t._v("无优惠券可用")])])},function(){var t=this,s=t._self._c;return s("li",[s("div",[t._v("配送费用")]),s("div",{staticClass:"red"},[t._v("￥0")])])}],o=e(377),d=e(7535),r={name:"PayIndex",data(){return{orderid:"",address:{},goods:{},total_price:"",total_count:"",message:""}},created(){this.getAddersList(),this.getOrderId()},methods:{async getAddersList(){const{data:{list:t}}=await(0,o.qO)();this.addersDetail=t,console.log(this.addersDetail)},mode(){return this.$route.query.mode},cartId(){return this.$route.query.cartId},goodsId(){return this.$route.query.goodsId},goodsNum(){return this.$route.query.goodsNum},goodsSkuId(){return this.$route.query.goodsSkuId},async getOrderId(){if("cart"===this.mode()){const{data:{orderId:t}}=await(0,d.Gd)(this.mode(),{cartIds:this.cartId()});this.orderid=t,console.log(this.orderid)}else{const{data:{orderId:t}}=await(0,d.Gd)(this.mode(),{goodsId:this.goodsId(),goodsNum:this.goodsNum(),goodsSkuId:this.goodsSkuId()});this.orderid=t}this.getOrderList(this.orderid)},async getOrderList(t){const{data:{order:s}}=await(0,d.Fw)(t);this.address=s.address,this.goods=s.goods,this.total_price=parseFloat(s.total_price),this.total_count=this.goods.reduce(((t,s)=>s.total_num),0)},onSubmit(){console.log("提交订单"),this.$toast.success("支付成功"),this.$router.replace("/myorder")},async onSubmit1(){console.log("提交订单"),"cart"===this.mode()?await(0,d.pm)(this.mode(),{cartIds:this.cartId(),remark:this.message}):await(0,d.pm)(this.mode(),{goodsId:this.goodsId(),goodsNum:this.goodsNum(),goodsSkuId:this.goodsSkuId(),remark:this.message}),this.$toast.success("支付成功"),this.$router.replace("/myorder")}},computed:{}},n=r,c=e(1001),l=(0,c.Z)(n,a,i,!1,null,"49584380",null),u=l.exports},377:function(t,s,e){e.d(s,{RT:function(){return o},mO:function(){return d},qO:function(){return i}});var a=e(4471);const i=()=>a.Z.get("/address/list"),o=()=>a.Z.get("/region/tree"),d=()=>a.Z.post("/address/add",{name:"张小二",phone:"18999292929",region:[{value:782,label:"上海"},{value:783,label:"上海市"},{value:785,label:"徐汇区"}],detail:"北京路1号楼8888室"})},7535:function(t,s,e){e.d(s,{Fw:function(){return o},Gd:function(){return i},pm:function(){return d},sl:function(){return n},ue:function(){return r}});var a=e(4471);const i=(t,s)=>a.Z.post("/checkout/order",{mode:t,delivery:10,couponId:0,isUsePoints:0,...s}),o=t=>a.Z.post("/order/detail",{orderId:t}),d=(t,s)=>(console.log(t,s),a.Z.post("/checkout/submit",{mode:t,delivery:10,couponId:0,isUsePoints:0,payType:10,...s})),r=(t,s)=>a.Z.post("/order/list",{dataType:t,page:s}),n=t=>a.Z.post("/order/cancel",{orderId:t})},6072:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAAANCAYAAADVGpDCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3Yjk4M2ExYy1jMDhkLTQ1OTktYTI0Ny1kZjNjYzdiYTQ5ZTgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDQwNkY3RkU5N0NGMTFFNUI3N0M4NTU4MzM2RjlFODIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDQwNkY3RkQ5N0NGMTFFNUI3N0M4NTU4MzM2RjlFODIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNzgwZWI1NS03OGFhLTQzOTUtODQ4OC1lOWI5YmVlYTY1ZDciIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1OTRiYzUyMy1jMzc3LTExNzgtYTdkZS04NGY3YmM1ZGIxMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz556PLxAAACBElEQVR42tyaSyhEYRTHP48imlKibDQeSSlkSlEWLCRFsZNH5FE2FqQ8ErIRC9lIkTwXSpMkWWChhEJCSnlkoUZGSsr78f98n43CMFPu/Z/6NZuZ2zn33/+cb869XkmLx8IDEQaGQJbgiytQDSY3MyL+LYnL/HxPXSoHDIJQQq2WQQk4Dbbb/yUB29LJ+6e3B66VB3ZITbUIEqSpCGoJBP1ghtBUD6ARpEtTGSEhXzd+awE9oJzQUPegWdf3QlBPMhgDMYRa7YNisGWkpP5qrBQtVBShUHugUE9hs4fUtwG0utlEjRivoA/Ug1sj3vjffr8FNJEK1auPFHcE9UTq5pdK2PwcoAzMG7mjuRrRYEIfK9jiDJSCBZJ6ynSTsBBqNQ0qgdPISbq6vJCFbJOaagrEk5gqWNczRGiqG1Ah1LLMafRkf5pYIUKtZnMJDXUNasAIST2ZYFioRx9ssQaKwJFZEv5uYmWDXVJTrYBEElP562PfPKGpnkAbSDOTqb6aWAGgW6iHol5kQj2CdtAJngnqkc1hHMQRNr9DPaXWzZj8Z2PZtFCxhEIdaKE2CGqRJ4060AH8CLUaALX6f5VpBZLhI9SaeZXQVHKNLt84SCIxVbhQi5YuQlNd6OVElZlN9TGxrGBUn2PZ4lyoTdIsST0FQj0UDSLUak6ot3gcBLVY3wQYAJoVXxmNERajAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=837.e8ae6306.js.map